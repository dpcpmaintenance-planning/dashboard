<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Meta & Title -->
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Narra Thermal 1 Equipment Status</title>
    <link rel="icon" type="image/png" href="DMCIlogo.png" />

    <!-- Styles -->
    <link rel="stylesheet" href="system.css" />
    <link rel="stylesheet" href="table.css" />
    <link rel="stylesheet" href="header.css" />
    <link rel="stylesheet" href="footer.css" />
    <link rel="stylesheet" href="mobile.css" />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/tom-select@2.3.1/dist/css/tom-select.css"
    />

    <!-- Scripts (external libs, defer for performance) -->
    <script
      src="https://cdn.jsdelivr.net/npm/tom-select@2.3.1/dist/js/tom-select.complete.min.js"
      defer
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"
      defer
    ></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"
      defer
    ></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.28/jspdf.plugin.autotable.min.js"
      defer
    ></script>
  </head>

  <body>
    <!-- Header -->
    <header id="main-header"></header>

    <!-- Page Title -->
    <section class="page-title">
      <div>NARRA THERMAL 1 EQUIPMENT STATUS</div>
    </section>

    <!-- Navigation Tabs -->
    <nav class="tabs" id="tabs-container" aria-label="System Navigation"></nav>

    <!-- Diagram Section -->
    <main class="diagram-container" id="diagram"></main>

    <!-- Equipment List Modal -->
    <div
      id="equipment-modal"
      class="modal hidden"
      role="dialog"
      aria-modal="true"
    >
      <div class="modal-content">
        <button id="equipment-modal-close" class="close" aria-label="Close">
          &times;
        </button>

        <div class="filter-container">
          <h2>Equipment List</h2>

          <label for="system-filter">System:</label>
          <select id="system-filter"></select>

          <label for="equipment-filter">Equipment:</label>
          <select id="equipment-filter"></select>

          <input
            type="search"
            id="search-bar"
            placeholder="🔍 Search equipment, description..."
            class="search-input"
            aria-label="Search Equipment"
          />

          <div class="status-toggle-buttons">
            <button id="pending-btn" class="filter-btn">Pending</button>
            <button id="done-btn" class="filter-btn">Done</button>
          </div>
        </div>

        <div class="table-container">
          <table class="equipment-table">
            <thead>
              <tr>
                <th>Timestamp</th>
                <th>Work Order Num</th>
                <th>Equipment</th>
                <th>Sub-Component</th>
                <th>Brief Description</th>
                <th>Detailed Description</th>
                <th>Severity</th>
                <th>Planning Remarks</th>
                <th>WR Status</th>
                <th>Image</th>
              </tr>
            </thead>
            <tbody id="equipment-table-body"></tbody>
          </table>
        </div>
      </div>
    </div>

    <!-- PDF Export Controls -->
    <section class="pdf-container">
      <label for="start-date">From:</label>
      <input type="date" id="start-date" class="export-pdf-input" />

      <label for="end-date">To:</label>
      <input type="date" id="end-date" class="export-pdf-input" />

      <button id="export-pdf-btn" class="export-pdf-btn">
        📄 Export Pending Request
      </button>
    </section>

    <!-- Diagram Equipment Modal -->
    <div
      id="diagram-modal"
      class="modal hidden"
      role="dialog"
      aria-modal="true"
    >
      <div class="modal-content">
        <button id="diagram-modal-close" class="close" aria-label="Close">
          &times;
        </button>

        <div class="status-toggle-buttons">
          <h2 id="diagram-modal-title"></h2>
          <button id="diagram-pending-btn" class="filter-btn">Pending</button>
          <button id="diagram-done-btn" class="filter-btn">Done</button>
        </div>

        <div class="table-container">
          <table class="status-table">
            <thead>
              <tr>
                <th>Timestamp</th>
                <th>Work Order No.</th>
                <th>Equipment</th>
                <th>Sub-Component</th>
                <th>Brief Description</th>
                <th>Detailed Description</th>
                <th>Severity</th>
                <th>Planning Remarks</th>
                <th>WR Status</th>
                <th>Images</th>
              </tr>
            </thead>
            <tbody id="diagram-table-body"></tbody>
          </table>
        </div>
      </div>
    </div>

    <!-- Image Preview Modal -->
    <div id="image-modal" class="modal hidden" role="dialog" aria-modal="true">
      <div class="modal-content image-modal-content">
        <button id="image-modal-close" class="close" aria-label="Close">
          &times;
        </button>
        <img id="image-modal-img" src="" alt="Image Preview" />
      </div>
    </div>

    <!-- Last Updated -->
    <div id="last-updated" class="last-updated-text"></div>

    <!-- Footer -->
    <footer id="main-footer" class="footer"></footer>

    <!-- App Scripts -->
    <script src="javascript/config.js" defer></script>
    <script src="javascript/equip.js" defer></script>
    <script src="javascript/utils.js" defer></script>
    <script src="javascript/diagram.js" defer></script>
    <script src="javascript/status.js" defer></script>
    <script src="javascript/main.js" defer></script>
    <script src="javascript/pdf.js" defer></script>
    <script src="js/header.js" defer></script>
    <script src="javascript/tabs.js" defer></script>
  </body>
</html>
